/* pickit v1.0.0, @license MIT */
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((t="undefined"!=typeof globalThis?globalThis:t||self).colorpicker={})}(this,(function(t){"use strict";var o=function(){function t(o,e){var n,i,r,s,a,l,c,u;if(void 0===e&&(e={}),this.container=null,this.colorBox=null,this.hueSlider=null,this.alphaSlider=null,this.hexInput=null,this.currentColor={h:0,s:100,l:50,a:1},this.isOpen=!1,this.saturationPointer=null,this.announceTimeout=null,this.input="string"==typeof o?document.querySelector(o):o,!this.input)throw new Error("ColorPicker: Invalid element selector");this.options={defaultColor:e.defaultColor||"#3b82f6",format:e.format||"hex",showAlpha:null!==(n=e.showAlpha)&&void 0!==n&&n,presetColors:e.presetColors||["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#000000","#ffffff"],inline:null!==(i=e.inline)&&void 0!==i&&i,onChange:e.onChange||function(){},onOpen:e.onOpen||function(){},onClose:e.onClose||function(){},appendTo:e.appendTo||document.body,position:e.position||"auto",closeOnSelect:null===(r=e.closeOnSelect)||void 0===r||r,ariaLabels:{hue:(null===(s=e.ariaLabels)||void 0===s?void 0:s.hue)||"Hue",saturation:(null===(a=e.ariaLabels)||void 0===a?void 0:a.saturation)||"Saturation and Lightness",lightness:(null===(l=e.ariaLabels)||void 0===l?void 0:l.lightness)||"Lightness",alpha:(null===(c=e.ariaLabels)||void 0===c?void 0:c.alpha)||"Alpha",presets:(null===(u=e.ariaLabels)||void 0===u?void 0:u.presets)||"Preset colors"}},this.init(),t.instances.set(this.input,this)}return t.prototype.init=function(){var t=this.input.value||this.options.defaultColor;this.currentColor=this.parseColor(t),this.buildColorPicker(),this.setupEventListeners(),this.updateColorDisplay(),this.options.inline&&this.open()},t.prototype.buildColorPicker=function(){this.container=document.createElement("div"),this.container.className="colorpicker-container",this.container.setAttribute("role","dialog"),this.container.setAttribute("aria-label","Color picker"),this.container.style.display="none";var t='\n      <div class="colorpicker-content">\n        <div class="colorpicker-saturation" \n             role="slider" \n             aria-label="'+this.options.ariaLabels.saturation+'"\n             aria-valuemin="0"\n             aria-valuemax="100"\n             aria-valuenow="'+this.currentColor.s+'"\n             tabindex="0">\n          <div class="colorpicker-saturation-overlay"></div>\n          <div class="colorpicker-saturation-pointer" role="presentation"></div>\n        </div>\n        \n        <div class="colorpicker-controls">\n          <div class="colorpicker-sliders">\n            <div class="colorpicker-slider-group">\n              <label for="colorpicker-hue">\n                <span class="colorpicker-label">'+this.options.ariaLabels.hue+'</span>\n              </label>\n              <input \n                type="range" \n                id="colorpicker-hue"\n                class="colorpicker-slider colorpicker-hue-slider"\n                min="0" \n                max="360" \n                value="'+this.currentColor.h+'"\n                aria-label="'+this.options.ariaLabels.hue+'"\n              />\n            </div>\n            '+(this.options.showAlpha?'\n              <div class="colorpicker-slider-group">\n                <label for="colorpicker-alpha">\n                  <span class="colorpicker-label">'+this.options.ariaLabels.alpha+'</span>\n                </label>\n                <input \n                  type="range" \n                  id="colorpicker-alpha"\n                  class="colorpicker-slider colorpicker-alpha-slider"\n                  min="0" \n                  max="100" \n                  value="'+100*this.currentColor.a+'"\n                  aria-label="'+this.options.ariaLabels.alpha+'"\n                />\n              </div>\n            ':"")+'\n          </div>\n          \n          <div class="colorpicker-preview">\n            <div class="colorpicker-preview-color" role="presentation"></div>\n          </div>\n        </div>\n        \n        <div class="colorpicker-input-group">\n          <label for="colorpicker-hex">\n            <span class="colorpicker-sr-only">Color value</span>\n          </label>\n          <input \n            type="text" \n            id="colorpicker-hex"\n            class="colorpicker-input"\n            placeholder="#000000"\n            aria-label="Color value in hexadecimal"\n          />\n        </div>\n        \n        '+(this.options.presetColors.length>0?'\n          <div class="colorpicker-presets" role="group" aria-label="'+this.options.ariaLabels.presets+'">\n            '+this.options.presetColors.map((function(t){return'\n              <button \n                type="button"\n                class="colorpicker-preset" \n                style="background-color: '+t+'"\n                data-color="'+t+'"\n                aria-label="Select color '+t+'"\n              ></button>\n            '})).join("")+"\n          </div>\n        ":"")+"\n      </div>\n    ";this.container.innerHTML=t,this.colorBox=this.container.querySelector(".colorpicker-saturation"),this.saturationPointer=this.container.querySelector(".colorpicker-saturation-pointer"),this.hueSlider=this.container.querySelector(".colorpicker-hue-slider"),this.alphaSlider=this.container.querySelector(".colorpicker-alpha-slider"),this.hexInput=this.container.querySelector(".colorpicker-input"),this.options.appendTo.appendChild(this.container)},t.prototype.setupEventListeners=function(){var t,o=this;this.input.addEventListener("click",(function(){o.options.inline||o.toggle()})),this.input.addEventListener("change",(function(){o.currentColor=o.parseColor(o.input.value),o.updateColorDisplay()})),this.hueSlider&&this.hueSlider.addEventListener("input",(function(t){o.currentColor.h=parseInt(t.target.value),o.updateColorDisplay(),o.announceColorChange()})),this.alphaSlider&&this.alphaSlider.addEventListener("input",(function(t){o.currentColor.a=parseInt(t.target.value)/100,o.updateColorDisplay(),o.announceColorChange()})),this.colorBox&&(this.colorBox.addEventListener("mousedown",(function(t){return o.onSaturationMouseDown(t)})),this.colorBox.addEventListener("keydown",(function(t){return o.onSaturationKeyDown(t)}))),this.hexInput&&this.hexInput.addEventListener("input",(function(t){var e=t.target.value;o.isValidHex(e)&&(o.currentColor=o.parseColor(e),o.updateColorDisplay(!1))}));var e=null===(t=this.container)||void 0===t?void 0:t.querySelectorAll(".colorpicker-preset");null==e||e.forEach((function(t){t.addEventListener("click",(function(t){var e=t.currentTarget.dataset.color;o.currentColor=o.parseColor(e),o.updateColorDisplay(),o.options.closeOnSelect&&o.close()}))})),this.options.inline||document.addEventListener("mousedown",(function(t){var e;o.isOpen&&!(null===(e=o.container)||void 0===e?void 0:e.contains(t.target))&&t.target!==o.input&&o.close()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&o.isOpen&&!o.options.inline&&(o.close(),o.input.focus())}))},t.prototype.onSaturationMouseDown=function(t){var o=this;t.preventDefault(),this.updateSaturationFromMouse(t);var e=function(t){o.updateSaturationFromMouse(t)},n=function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)},t.prototype.updateSaturationFromMouse=function(t){if(this.colorBox){var o=this.colorBox.getBoundingClientRect(),e=Math.max(0,Math.min(t.clientX-o.left,o.width)),n=Math.max(0,Math.min(t.clientY-o.top,o.height));this.currentColor.s=e/o.width*100,this.currentColor.l=100-n/o.height*100,this.updateColorDisplay(),this.announceColorChange()}},t.prototype.onSaturationKeyDown=function(t){var o=t.shiftKey?10:1,e=!1;switch(t.key){case"ArrowRight":this.currentColor.s=Math.min(100,this.currentColor.s+o),e=!0;break;case"ArrowLeft":this.currentColor.s=Math.max(0,this.currentColor.s-o),e=!0;break;case"ArrowUp":this.currentColor.l=Math.min(100,this.currentColor.l+o),e=!0;break;case"ArrowDown":this.currentColor.l=Math.max(0,this.currentColor.l-o),e=!0}e&&(t.preventDefault(),this.updateColorDisplay(),this.announceColorChange())},t.prototype.updateColorDisplay=function(t){var o;if(void 0===t&&(t=!0),this.colorBox&&(this.colorBox.style.backgroundColor="hsl("+this.currentColor.h+", 100%, 50%)"),this.saturationPointer&&this.colorBox){var e=this.currentColor.s/100*100,n=100*(1-this.currentColor.l/100);this.saturationPointer.style.left=e+"%",this.saturationPointer.style.top=n+"%"}var i=null===(o=this.container)||void 0===o?void 0:o.querySelector(".colorpicker-preview-color");i&&(i.style.backgroundColor=this.toHSLString(this.currentColor)),this.hexInput&&t&&(this.hexInput.value=this.toHex(this.currentColor)),this.hueSlider&&(this.hueSlider.value=String(this.currentColor.h)),this.alphaSlider&&(this.alphaSlider.value=String(100*this.currentColor.a)),t&&(this.input.value=this.formatColor(this.currentColor),this.options.onChange(this.input.value))},t.prototype.formatColor=function(t){switch(this.options.format){case"hsl":return this.toHSLString(t);case"rgb":return this.toRGBString(this.hslToRgb(t));case"hex":default:return this.toHex(t)}},t.prototype.parseColor=function(t){if((t=t.trim()).startsWith("#"))return this.hexToHsl(t);var o=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(o){var e={r:parseInt(o[1]),g:parseInt(o[2]),b:parseInt(o[3]),a:o[4]?parseFloat(o[4]):1};return this.rgbToHsl(e)}var n=t.match(/hsla?\((\d+),\s*(\d+)%,\s*(\d+)%(?:,\s*([\d.]+))?\)/);return n?{h:parseInt(n[1]),s:parseInt(n[2]),l:parseInt(n[3]),a:n[4]?parseFloat(n[4]):1}:this.currentColor},t.prototype.hexToHsl=function(t){t=t.replace("#","");var o=parseInt(t.substring(0,2),16)/255,e=parseInt(t.substring(2,4),16)/255,n=parseInt(t.substring(4,6),16)/255,i=8===t.length?parseInt(t.substring(6,8),16)/255:1;return this.rgbToHsl({r:255*o,g:255*e,b:255*n,a:i})},t.prototype.rgbToHsl=function(t){var o=t.r/255,e=t.g/255,n=t.b/255,i=Math.max(o,e,n),r=Math.min(o,e,n),s=0,a=0,l=(i+r)/2;if(i!==r){var c=i-r;switch(a=l>.5?c/(2-i-r):c/(i+r),i){case o:s=((e-n)/c+(e<n?6:0))/6;break;case e:s=((n-o)/c+2)/6;break;case n:s=((o-e)/c+4)/6}}return{h:Math.round(360*s),s:Math.round(100*a),l:Math.round(100*l),a:t.a}},t.prototype.hslToRgb=function(t){var o,e,n,i=t.h/360,r=t.s/100,s=t.l/100;if(0===r)o=e=n=s;else{var a=function(t,o,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(o-t)*e:e<.5?o:e<2/3?t+(o-t)*(2/3-e)*6:t},l=s<.5?s*(1+r):s+r-s*r,c=2*s-l;o=a(c,l,i+1/3),e=a(c,l,i),n=a(c,l,i-1/3)}return{r:Math.round(255*o),g:Math.round(255*e),b:Math.round(255*n),a:t.a}},t.prototype.toHex=function(t){var o=this.hslToRgb(t),e=function(t){return t.toString(16).padStart(2,"0")};return"#"+e(o.r)+e(o.g)+e(o.b)},t.prototype.toHSLString=function(t){return this.options.showAlpha&&t.a<1?"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")":"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},t.prototype.toRGBString=function(t){return this.options.showAlpha&&t.a<1?"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")":"rgb("+t.r+", "+t.g+", "+t.b+")"},t.prototype.isValidHex=function(t){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/.test(t)},t.prototype.announceColorChange=function(){var t=this;this.announceTimeout||(this.announceTimeout=setTimeout((function(){var o,e=document.createElement("div");e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.className="colorpicker-sr-only",e.textContent="Color changed to "+t.formatColor(t.currentColor),null===(o=t.container)||void 0===o||o.appendChild(e),setTimeout((function(){return e.remove()}),1e3),t.announceTimeout=null}),500))},t.prototype.open=function(){var t=this;!this.isOpen&&this.container&&(this.isOpen=!0,this.container.style.display="block",this.options.inline||this.positionPicker(),this.options.onOpen(),setTimeout((function(){var o;null===(o=t.colorBox)||void 0===o||o.focus()}),0))},t.prototype.close=function(){this.isOpen&&this.container&&(this.isOpen=!1,this.options.inline||(this.container.style.display="none"),this.options.onClose())},t.prototype.toggle=function(){this.isOpen?this.close():this.open()},t.prototype.positionPicker=function(){if(this.container){var t=this.input.getBoundingClientRect(),o=this.container.getBoundingClientRect(),e=window.innerHeight,n=t.bottom+window.scrollY+4,i=t.left+window.scrollX;if("auto"===this.options.position){var r=e-t.bottom,s=t.top;r<o.height&&s>r&&(n=t.top+window.scrollY-o.height-4)}else"above"===this.options.position&&(n=t.top+window.scrollY-o.height-4);this.container.style.position="absolute",this.container.style.top=n+"px",this.container.style.left=i+"px",this.container.style.zIndex="9999"}},t.prototype.setColor=function(t){this.currentColor=this.parseColor(t),this.updateColorDisplay()},t.prototype.getColor=function(){return this.formatColor(this.currentColor)},t.prototype.destroy=function(){var o;null===(o=this.container)||void 0===o||o.remove(),t.instances.delete(this.input)},t.getInstance=function(o){return t.instances.get(o)},t.instances=new Map,t}();t.ColorPicker=o,t.default=function(t,e){return new o(t,e)},Object.defineProperty(t,"__esModule",{value:!0})}));