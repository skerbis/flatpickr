// Modern Theme for Pickit
// Based on custom theme with micro-animations and modern design
// Full dark mode support with prefers-reduced-motion for accessibility

// Base Stylus variables - modern, clean defaults
$calendarBackground = #ffffff
$calendarBorderColor = #e5e7eb

$monthForeground = #0f172a
$monthBackground = #ffffff

$weekdaysBackground = #f8fafc
$weekdaysForeground = #64748b

$dayForeground = #0f172a
$dayHoverBackground = #f1f5f9

$todayColor = #3b82f6
$today_fg_color = #0f172a

$selectedDayBackground = #3b82f6
$selectedDayForeground = #ffffff

$disabled_day_color = #cbd5e1

$noCalendarBorder = true

@require "../flatpickr"

// Modern theme with subtle animations and glassmorphic effects
.flatpickr-calendar
	background var(--fp-bg, #ffffff)
	border-radius var(--fp-border-radius, 12px)
	box-shadow var(--fp-shadow, 0 10px 25px rgba(0, 0, 0, 0.08), 0 6px 12px rgba(0, 0, 0, 0.04))
	border 1px solid var(--fp-border-color, rgba(0, 0, 0, 0.08))
	backdrop-filter blur(20px)
	transition transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease
	transform-origin top center
	
	&.open
		animation slideDown 0.25s cubic-bezier(0.4, 0, 0.2, 1)
	
	&.inline
		animation none
	
	&.noCalendar.hasTime
		background transparent
		box-shadow none
		border none
		backdrop-filter none

@keyframes slideDown
	from
		opacity 0
		transform translateY(-8px) scale(0.98)
	to
		opacity 1
		transform translateY(0) scale(1)

.flatpickr-months
	background var(--fp-month-bg, #ffffff)
	border-radius var(--fp-border-radius, 12px) var(--fp-border-radius, 12px) 0 0
	padding 4px 0
	
	.flatpickr-month
		background var(--fp-month-bg, #ffffff)
		color var(--fp-month-fg, #0f172a)
		fill var(--fp-month-fg, #0f172a)
		transition color 0.2s ease
	
	.flatpickr-prev-month,
	.flatpickr-next-month
		fill var(--fp-month-fg, #0f172a)
		padding 12px
		border-radius 8px
		transition all 0.2s cubic-bezier(0.4, 0, 0.2, 1)
		
		svg
			fill var(--fp-month-fg, #0f172a)
			transition fill 0.2s ease, transform 0.2s ease
		
		&:hover
			background var(--fp-arrow-hover-bg, rgba(59, 130, 246, 0.1))
			transform scale(1.05)
			
			svg
				fill var(--fp-arrow-hover-color, #3b82f6)
				transform scale(1.1)

.flatpickr-current-month
	.flatpickr-monthDropdown-months
		background var(--fp-month-bg, #ffffff)
		color var(--fp-month-fg, #0f172a)
		border none
		border-radius 6px
		padding 6px 10px
		font-weight 600
		transition all 0.2s ease
		
		&:hover
			background var(--fp-month-dropdown-hover, #f8fafc)
		
	.numInputWrapper
		input.cur-year
			color var(--fp-month-fg, #0f172a)
			font-weight 600
			transition color 0.2s ease

.flatpickr-current-month .numInputWrapper
	.arrowUp,
	.arrowDown
		transition opacity 0.2s ease, transform 0.2s ease
		&:hover
			opacity 1
			transform scale(1.1)
		&:after
			border-bottom-color var(--fp-month-fg, #0f172a)
	.arrowDown:after
		border-top-color var(--fp-month-fg, #0f172a)

span.flatpickr-weekday,
abbr.flatpickr-weekday
	background var(--fp-weekdays-bg, #f8fafc) !important
	color var(--fp-weekdays-fg, #64748b)
	font-weight 600
	text-transform uppercase
	font-size 10.5px
	letter-spacing 0.8px
	padding 12px 0

.flatpickr-innerContainer
	background var(--fp-inner-bg, transparent)

.flatpickr-days
	background var(--fp-days-bg, transparent)

.flatpickr-day
	color var(--fp-day-fg, #0f172a)
	background var(--fp-day-bg, transparent)
	border-radius var(--fp-day-border-radius, 8px)
	transition all 0.2s cubic-bezier(0.4, 0, 0.2, 1)
	font-weight 500
	border none
	position relative
	
	&:before
		content ''
		position absolute
		inset 0
		border-radius var(--fp-day-border-radius, 8px)
		opacity 0
		transition opacity 0.2s ease
		background var(--fp-day-hover-overlay, radial-gradient(circle at center, rgba(59, 130, 246, 0.12), transparent))
	
	&:hover:not(.disabled):not(.selected)
		background var(--fp-day-hover-bg, #f1f5f9)
		transform translateY(-1px)
		box-shadow 0 2px 4px rgba(0, 0, 0, 0.04)
		
		&:before
			opacity 1
	
	&:active:not(.disabled)
		transform translateY(0)
	
	&.today
		border-color var(--fp-today-color, #3b82f6)
		color var(--fp-today-fg, #0f172a)
		background var(--fp-today-bg, rgba(59, 130, 246, 0.08))
		font-weight 600
		border 2px solid var(--fp-today-color, #3b82f6)
		
		&:hover,
		&:focus
			border-color var(--fp-today-color, #3b82f6)
			background var(--fp-today-hover-bg, rgba(59, 130, 246, 0.15))
			color var(--fp-today-fg, #0f172a)
			box-shadow var(--fp-today-hover-shadow, 0 4px 8px rgba(59, 130, 246, 0.25))
			transform translateY(-2px)
	
	&.selected,
	&.startRange,
	&.endRange
		background var(--fp-selected-bg, #3b82f6)
		border-color var(--fp-selected-bg, #3b82f6)
		color var(--fp-selected-fg, #ffffff)
		font-weight 600
		box-shadow var(--fp-selected-shadow, 0 4px 8px rgba(59, 130, 246, 0.35))
		transform scale(1.02)
		
		&:before
			display none
		
		&:hover,
		&:focus
			background var(--fp-selected-hover-bg, #2563eb)
			border-color var(--fp-selected-hover-bg, #2563eb)
			box-shadow var(--fp-selected-hover-shadow, 0 6px 12px rgba(59, 130, 246, 0.45))
			transform translateY(-1px) scale(1.02)
	
	&.disabled,
	&.prevMonthDay:not(.today),
	&.nextMonthDay:not(.today)
		color var(--fp-disabled-fg, #cbd5e1)
		opacity 0.4
		cursor not-allowed
		
		&:hover
			transform none
			box-shadow none
			background transparent
			
			&:before
				opacity 0
	
	&.inRange
		background var(--fp-inrange-bg, rgba(59, 130, 246, 0.08))
		box-shadow -10px 0 0 var(--fp-inrange-bg, rgba(59, 130, 246, 0.08)), 10px 0 0 var(--fp-inrange-bg, rgba(59, 130, 246, 0.08))
		border-radius 0
		
		&:hover
			background var(--fp-inrange-hover-bg, rgba(59, 130, 246, 0.12))

// Time picker with modern styling
.flatpickr-time
	border-top 1px solid var(--fp-time-border, #e5e7eb)
	background var(--fp-time-bg, #fafafa)
	border-radius 0 0 var(--fp-border-radius, 12px) var(--fp-border-radius, 12px)
	padding 8px 0
	
	input,
	.flatpickr-am-pm
		background transparent
		color var(--fp-time-fg, #0f172a)
		border none
		border-radius 0
		font-weight 500
		transition all 0.2s ease
		box-sizing border-box
		
		&:hover
			background var(--fp-time-input-hover-bg, rgba(59, 130, 246, 0.05))
			color var(--fp-time-hover-fg, #0f172a)
		
		&:focus
			background var(--fp-time-input-focus-bg, rgba(59, 130, 246, 0.08))
			box-shadow 0 0 0 2px rgba(59, 130, 246, 0.3)
			outline none

.flatpickr-time-separator
	color var(--fp-time-separator, #94a3b8)
	font-weight 600

// Dark mode support
@media (prefers-color-scheme: dark)
	.flatpickr-calendar
		--fp-bg: #1e293b
		--fp-border-color: rgba(255, 255, 255, 0.1)
		--fp-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 10px 20px rgba(0, 0, 0, 0.3)
		
		--fp-month-bg: #1e293b
		--fp-month-fg: #f1f5f9
		
		--fp-weekdays-bg: #0f172a
		--fp-weekdays-fg: #94a3b8
		
		--fp-day-fg: #e2e8f0
		--fp-day-bg: transparent
		--fp-day-hover-bg: #334155
		--fp-day-hover-overlay: radial-gradient(circle at center, rgba(59, 130, 246, 0.15), transparent)
		
		--fp-today-bg: rgba(59, 130, 246, 0.12)
		--fp-today-hover-bg: rgba(59, 130, 246, 0.2)
		--fp-today-fg: #f1f5f9
		--fp-today-color: #60a5fa
		
		--fp-selected-bg: #3b82f6
		--fp-selected-hover-bg: #2563eb
		--fp-selected-fg: #ffffff
		
		--fp-disabled-fg: #475569
		
		--fp-inrange-bg: rgba(59, 130, 246, 0.12)
		--fp-inrange-hover-bg: rgba(59, 130, 246, 0.18)
		
		--fp-arrow-hover-bg: rgba(59, 130, 246, 0.15)
		--fp-arrow-hover-color: #60a5fa
		
		--fp-month-dropdown-hover: #334155
		
		--fp-time-bg: #0f172a
		--fp-time-border: #334155
		--fp-time-fg: #f1f5f9
		--fp-time-input-hover-bg: rgba(59, 130, 246, 0.1)
		--fp-time-hover-fg: #f1f5f9
		--fp-time-input-focus-bg: rgba(59, 130, 246, 0.15)
		--fp-time-separator: #64748b
	
	// Fix week select plugin hover effect in dark mode
	.flatpickr-day.inRange
		box-shadow -10px 0 0 rgba(59, 130, 246, 0.12), 10px 0 0 rgba(59, 130, 246, 0.12)
	
	// Fix time picker arrows visibility in dark mode
	.numInputWrapper
		span.arrowUp:after
			border-bottom-color #f1f5f9 !important
		
		span.arrowDown:after
			border-top-color #f1f5f9 !important
	
	.flatpickr-time
		.numInputWrapper
			span.arrowUp:after
				border-bottom-color #f1f5f9 !important
			
			span.arrowDown:after
				border-top-color #f1f5f9 !important

// High contrast mode support
@media (prefers-contrast: high)
	.flatpickr-calendar
		border-width 2px
		--fp-border-color: currentColor
	
	.flatpickr-day
		&.today
			border-width 3px
		
		&.selected,
		&.startRange,
		&.endRange
			border-width 2px
			font-weight 700

// Reduced motion support - disable all animations
@media (prefers-reduced-motion: reduce)
	*,
	*:before,
	*:after
		animation-duration 0.01ms !important
		animation-iteration-count 1 !important
		transition-duration 0.01ms !important
		transition-delay 0s !important
	
	.flatpickr-calendar
		transition none
		animation none
		transform none
		
		&.open
			animation none
	
	.flatpickr-months .flatpickr-prev-month,
	.flatpickr-months .flatpickr-next-month
		transition none
		
		&:hover
			transform none
			
			svg
				transform none
	
	.flatpickr-day
		transition none
		
		&:before
			transition none
			display none
		
		&:hover:not(.disabled):not(.selected)
			transform none
		
		&:active:not(.disabled)
			transform none
		
		&.today
			&:hover,
			&:focus
				transform none
		
		&.selected,
		&.startRange,
		&.endRange
			transform none
			
			&:hover,
			&:focus
				transform none
	
	.flatpickr-time input,
	.flatpickr-time .flatpickr-am-pm
		transition none
	
	.flatpickr-current-month .numInputWrapper .arrowUp,
	.flatpickr-current-month .numInputWrapper .arrowDown
		transition none
		&:hover
			transform none

@keyframes none
	0%, 100%
		opacity 1
		transform none
